import{g as Xa,R as Ka,k as Qa,r,u as et,ao as G,j as e,a7 as we,U as xa,ap as Ne,f as ba,a8 as ya,ah as ke,v as J,A as va,y as f,t as j,H as Se,ag as ja,W as wa,L as M,b as at,aq as tt,ar as st,as as rt,at as lt,au as ne,av as R,aw as I,ax as O,ay as Ce,q as Na,az as nt,x as He,aA as it,aB as ka,aC as Sa}from"./index-DwAunvbz.js";import{C as ot}from"./ContactSupportWrapper-BIDOCAi0.js";const Be=["https://api.dicebear.com/7.x/bottts/svg?seed=${name}","https://randomuser.me/api/portraits/men/1.jpg","https://randomuser.me/api/portraits/women/1.jpg","https://randomuser.me/api/portraits/men/2.jpg","https://randomuser.me/api/portraits/women/2.jpg","https://randomuser.me/api/portraits/men/3.jpg","https://randomuser.me/api/portraits/women/3.jpg","https://randomuser.me/api/portraits/lego/1.jpg","https://randomuser.me/api/portraits/lego/2.jpg","https://randomuser.me/api/portraits/lego/3.jpg","https://api.dicebear.com/6.x/bottts/svg?seed=avatar0","https://api.dicebear.com/6.x/bottts/svg?seed=avatar1","https://api.dicebear.com/6.x/bottts/svg?seed=avatar2","https://api.dicebear.com/6.x/bottts/svg?seed=avatar3","https://api.dicebear.com/6.x/bottts/svg?seed=avatar4","https://api.dicebear.com/6.x/bottts/svg?seed=avatar5","https://api.dicebear.com/6.x/bottts/svg?seed=avatar6","https://api.dicebear.com/6.x/bottts/svg?seed=avatar7","https://api.dicebear.com/6.x/bottts/svg?seed=avatar8","https://api.dicebear.com/6.x/bottts/svg?seed=avatar9","https://api.dicebear.com/6.x/bottts/svg?seed=avatar10","https://api.dicebear.com/6.x/bottts/svg?seed=avatar11","https://api.dicebear.com/6.x/bottts/svg?seed=avatar12","https://api.dicebear.com/6.x/bottts/svg?seed=avatar13","https://api.dicebear.com/6.x/bottts/svg?seed=avatar14","https://api.dicebear.com/6.x/bottts/svg?seed=avatar15"],dt={seed:{type:"string"},flip:{type:"boolean",default:!1},rotate:{type:"integer",minimum:0,maximum:360,default:0},scale:{type:"integer",minimum:0,maximum:200,default:100},radius:{type:"integer",minimum:0,maximum:50,default:0},size:{type:"integer",minimum:1},backgroundColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"},default:["65c9ff"]},backgroundType:{type:"array",items:{type:"string",enum:["solid","gradientLinear"]},default:["solid"]},backgroundRotation:{type:"array",items:{type:"integer",minimum:-360,maximum:360},default:[0,360]},translateX:{type:"integer",minimum:-100,maximum:100,default:0},translateY:{type:"integer",minimum:-100,maximum:100,default:0},clip:{type:"boolean",default:!0},randomizeIds:{type:"boolean",default:!1},accessories:{type:"array",items:{type:"string",enum:["kurt","prescription01","prescription02","round","sunglasses","wayfarers","eyepatch"]},default:["kurt","prescription01","prescription02","round","sunglasses","wayfarers","eyepatch"]},accessoriesColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"},default:["262e33","65c9ff","5199e4","25557c","e6e6e6","929598","3c4f5c","b1e2ff","a7ffc4","ffdeb5","ffafb9","ffffb1","ff488e","ff5c5c","ffffff"]},accessoriesProbability:{type:"integer",minimum:0,maximum:100,default:10},base:{type:"array",items:{type:"string",enum:["default"]},default:["default"]},clothesColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"},default:["262e33","65c9ff","5199e4","25557c","e6e6e6","929598","3c4f5c","b1e2ff","a7ffc4","ffafb9","ffffb1","ff488e","ff5c5c","ffffff"]},clothing:{type:"array",items:{type:"string",enum:["blazerAndShirt","blazerAndSweater","collarAndSweater","graphicShirt","hoodie","overall","shirtCrewNeck","shirtScoopNeck","shirtVNeck"]},default:["blazerAndShirt","blazerAndSweater","collarAndSweater","graphicShirt","hoodie","overall","shirtCrewNeck","shirtScoopNeck","shirtVNeck"]},clothingGraphic:{type:"array",items:{type:"string",enum:["bat","bear","cumbia","deer","diamond","hola","pizza","resist","skull","skullOutline"]},default:["bat","bear","cumbia","deer","diamond","hola","pizza","resist","skull","skullOutline"]},eyebrows:{type:"array",items:{type:"string",enum:["angryNatural","defaultNatural","flatNatural","frownNatural","raisedExcitedNatural","sadConcernedNatural","unibrowNatural","upDownNatural","angry","default","raisedExcited","sadConcerned","upDown"]},default:["angryNatural","defaultNatural","flatNatural","frownNatural","raisedExcitedNatural","sadConcernedNatural","unibrowNatural","upDownNatural","angry","default","raisedExcited","sadConcerned","upDown"]},eyes:{type:"array",items:{type:"string",enum:["closed","cry","default","eyeRoll","happy","hearts","side","squint","surprised","winkWacky","wink","xDizzy"]},default:["closed","cry","default","eyeRoll","happy","hearts","side","squint","surprised","winkWacky","wink","xDizzy"]},facialHair:{type:"array",items:{type:"string",enum:["beardLight","beardMajestic","beardMedium","moustacheFancy","moustacheMagnum"]},default:["beardLight","beardMajestic","beardMedium","moustacheFancy","moustacheMagnum"]},facialHairColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"},default:["a55728","2c1b18","b58143","d6b370","724133","4a312c","f59797","ecdcbf","c93305","e8e1e1"]},facialHairProbability:{type:"integer",minimum:0,maximum:100,default:10},hairColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"},default:["a55728","2c1b18","b58143","d6b370","724133","4a312c","f59797","ecdcbf","c93305","e8e1e1"]},hatColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"},default:["262e33","65c9ff","5199e4","25557c","e6e6e6","929598","3c4f5c","b1e2ff","a7ffc4","ffdeb5","ffafb9","ffffb1","ff488e","ff5c5c","ffffff"]},mouth:{type:"array",items:{type:"string",enum:["concerned","default","disbelief","eating","grimace","sad","screamOpen","serious","smile","tongue","twinkle","vomit"]},default:["concerned","default","disbelief","eating","grimace","sad","screamOpen","serious","smile","tongue","twinkle","vomit"]},nose:{type:"array",items:{type:"string",enum:["default"]},default:["default"]},skinColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"},default:["614335","d08b5b","ae5d29","edb98a","ffdbb4","fd9841","f8d25c"]},style:{type:"array",items:{type:"string",enum:["circle","default"]},default:["default"]},top:{type:"array",items:{type:"string",enum:["hat","hijab","turban","winterHat1","winterHat02","winterHat03","winterHat04","bob","bun","curly","curvy","dreads","frida","fro","froBand","longButNotTooLong","miaWallace","shavedSides","straight02","straight01","straightAndStrand","dreads01","dreads02","frizzle","shaggy","shaggyMullet","shortCurly","shortFlat","shortRound","shortWaved","sides","theCaesar","theCaesarAndSidePart","bigHair"]},default:["hat","hijab","turban","winterHat1","winterHat02","winterHat03","winterHat04","bob","bun","curly","curvy","dreads","frida","fro","froBand","longButNotTooLong","miaWallace","shavedSides","straight02","straight01","straightAndStrand","dreads01","dreads02","frizzle","shaggy","shaggyMullet","shortCurly","shortFlat","shortRound","shortWaved","sides","theCaesar","theCaesarAndSidePart","bigHair"]},topProbability:{type:"integer",minimum:0,maximum:100,default:100}},$e={properties:dt},u="https://urbansetu.onrender.com",n={fadeInUp:"animate-[fadeInUp_0.6s_ease-out_forwards] opacity-0 translate-y-8",fadeInLeft:"animate-[fadeInLeft_0.6s_ease-out_forwards] opacity-0 -translate-x-8",fadeInRight:"animate-[fadeInRight_0.6s_ease-out_forwards] opacity-0 translate-x-8",scaleIn:"animate-[scaleIn_0.5s_ease-out_forwards] opacity-0 scale-95",slideInUp:"animate-[slideInUp_0.5s_ease-out_forwards] opacity-0 translate-y-4",bounceIn:"animate-[bounceIn_0.7s_ease-out_forwards] opacity-0 scale-50",pulse:"animate-pulse",bounce:"animate-bounce",wiggle:"animate-[wiggle_1s_ease-in-out_infinite]",heartbeat:"animate-[heartbeat_1.5s_ease-in-out_infinite]",float:"animate-[float_3s_ease-in-out_infinite]"},ct=`
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInLeft {
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
}
@keyframes fadeInRight {
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes slideInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes bounceIn {
  0% { opacity: 0; transform: scale(0.3); }
  50% { opacity: 1; transform: scale(1.05); }
  70% { transform: scale(0.9); }
  100% { opacity: 1; transform: scale(1); }
}
@keyframes wiggle {
  0%, 7% { transform: rotateZ(0); }
  15% { transform: rotateZ(-15deg); }
  20% { transform: rotateZ(10deg); }
  25% { transform: rotateZ(-10deg); }
  30% { transform: rotateZ(6deg); }
  35% { transform: rotateZ(-4deg); }
  40%, 100% { transform: rotateZ(0); }
}
@keyframes heartbeat {
  0%, 50%, 100% { transform: scale(1); }
  25% { transform: scale(1.1); }
}
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
@keyframes shimmer {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}
@keyframes countUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
.animation-delay-0 { animation-delay: 0ms; }
.animation-delay-150 { animation-delay: 150ms; }
.animation-delay-300 { animation-delay: 300ms; }
.animation-delay-450 { animation-delay: 450ms; }
.animation-delay-600 { animation-delay: 600ms; }
.animation-delay-750 { animation-delay: 750ms; }
`,mt=[{key:"adventurer",label:"Adventurer"},{key:"adventurer-neutral",label:"Adventurer Neutral"},{key:"avataaars",label:"Avataaars"},{key:"avataaars-neutral",label:"Avataaars Neutral"},{key:"big-ears",label:"Big Ears"},{key:"big-ears-neutral",label:"Big Ears Neutral"},{key:"big-smile",label:"Big Smile"},{key:"bottts",label:"Bottts"},{key:"bottts-neutral",label:"Bottts Neutral"},{key:"croodles",label:"Croodles"},{key:"croodles-neutral",label:"Croodles Neutral"},{key:"dylan",label:"Dylan"},{key:"fun-emoji",label:"Fun Emoji"},{key:"glass",label:"Glass"},{key:"icons",label:"Icons"},{key:"identicon",label:"Identicon"},{key:"initials",label:"Initials"},{key:"lorelei",label:"Lorelei"},{key:"lorelei-neutral",label:"Lorelei Neutral"},{key:"micah",label:"Micah"},{key:"miniavs",label:"Miniavs"},{key:"notionists",label:"Notionists"},{key:"notionists-neutral",label:"Notionists Neutral"},{key:"open-peeps",label:"Open Peeps"},{key:"personas",label:"Personas"},{key:"pixel-art",label:"Pixel Art"},{key:"pixel-art-neutral",label:"Pixel Art Neutral"},{key:"rings",label:"Rings"},{key:"shapes",label:"Shapes"},{key:"thumbs",label:"Thumbs"}],ut=["style","seed","flip","rotate"],Ve=({end:t,duration:Pe=1e3,delay:q=0})=>{const[d,o]=r.useState(0),[U,Ae]=r.useState(!1);return r.useEffect(()=>{const Z=setTimeout(()=>{Ae(!0);let z=0;const L=t/(Pe/50),g=setInterval(()=>{z+=L,z>=t?(o(t),clearInterval(g)):o(Math.floor(z))},50);return()=>clearInterval(g)},q);return()=>clearTimeout(Z)},[t,Pe,q]),e.jsx("span",{className:`${U?"animate-[countUp_0.6s_ease-out_forwards]":"opacity-0"}`,children:d})};function pt(){const{currentUser:t,error:Pe}=Xa(a=>a.user),{wishlist:q}=Ka(),d=Qa(),[o,U]=r.useState({avatar:(t==null?void 0:t.avatar)||""}),[Ae,Z]=r.useState(!1),[z,L]=r.useState(""),[g,Ee]=r.useState(!1),[w,ie]=r.useState({listings:0,appointments:0,wishlist:0}),[X,oe]=r.useState(!1),[We,Ca]=r.useState([]),[de,$a]=r.useState(""),[Ye,ce]=r.useState(!1),[me,Ge]=r.useState(!1),[Te,K]=r.useState(!1),[Ie,Je]=r.useState(""),[qe,Q]=r.useState(""),[Ue,ee]=r.useState(!1),[ue,Ze]=r.useState(""),[Xe,fe]=r.useState(""),[De,ae]=r.useState(!1),[Ke,_e]=r.useState([]),[he,Qe]=r.useState(""),[pe,ea]=r.useState(""),[aa,H]=r.useState(""),[ta,sa]=r.useState(!1),[ge,B]=r.useState(""),[xe,V]=r.useState(""),[D,N]=r.useState(!1),[Pa,k]=r.useState(!1),[Fe,S]=r.useState(""),[ra,Me]=r.useState("");r.useEffect(()=>(Te||Ue||De||X?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[Te,Ue,De,X]);const[c,C]=r.useState({loading:!1,message:"",available:null}),[p,W]=r.useState({loading:!1,message:"",available:null}),[te,Aa]=r.useState(null),[se,Ea]=r.useState(null),[y,Ta]=r.useState(""),[Re,la]=r.useState(""),[$,P]=r.useState(!1),[_,v]=r.useState(!1),[be,A]=r.useState(""),[ye,na]=r.useState(!1),[ia,oa]=r.useState(!1),[da,E]=r.useState(""),[b,ve]=r.useState(!1),[re,Oe]=r.useState(0),[ca,ze]=r.useState(!0),[T,Ia]=r.useState(!1),[Le,Ua]=r.useState(!1),x=et();window.location.pathname.startsWith("/admin"),r.useEffect(()=>{const a=document.createElement("style");a.textContent=ct,document.head.appendChild(a);const s=setTimeout(()=>Ia(!0),100);return()=>{document.head.removeChild(a),clearTimeout(s)}},[]),r.useEffect(()=>{(w.listings>0||w.appointments>0||w.wishlist>0)&&Ua(!0)},[w]),r.useEffect(()=>{t&&(Ta(t.email||""),la(t.mobileNumber||""),t.email&&C({loading:!1,message:"",available:!0}))},[t]),r.useEffect(()=>{t&&Da()},[t]),r.useEffect(()=>{t&&ie(a=>({...a,wishlist:q.length}))},[q,t]),r.useEffect(()=>{let a=null;return re>0&&(a=setInterval(()=>{Oe(s=>s<=1?(ze(!0),0):s-1)},1e3)),()=>{a&&clearInterval(a)}},[re]),r.useEffect(()=>()=>{te&&clearTimeout(te),se&&clearTimeout(se)},[te,se]);const Da=async()=>{try{if(console.log("[fetchUserStats] Fetching stats for:",t),t&&(t.role==="admin"||t.role==="rootadmin")){const[a,s]=await Promise.all([G(`${u}/api/listing/user`),G(`${u}/api/bookings/`)]),i=await a.json(),l=await s.json();ie(m=>({listings:Array.isArray(i)?i.filter(h=>h.userRef===t._id).length:0,appointments:Array.isArray(l)?l.length:0,wishlist:m.wishlist}))}else{const[a,s]=await Promise.all([G(`${u}/api/listing/user`),G(`${u}/api/bookings/user/${t._id}`)]),i=await a.json(),l=await s.json();ie(m=>({listings:Array.isArray(i)?i.length:0,appointments:Array.isArray(l)?l.length:0,wishlist:m.wishlist}))}}catch(a){console.error("[fetchUserStats] Error fetching user stats:",a),ie(s=>({listings:0,appointments:0,wishlist:s.wishlist}))}},ma=async a=>{if(!a.trim()){C({loading:!1,message:"",available:null}),P(!1),v(!1),A("");return}if(!a.includes("@")){C({loading:!1,message:"Enter a valid email",available:!1}),P(!1),v(!1),A("");return}if(a===y){C({loading:!1,message:"",available:!0}),P(!0),v(!1),A("");return}try{C({loading:!0,message:"",available:null}),(await(await G(`${u}/api/user/check-email/${encodeURIComponent(a.trim())}`)).json()).available===!1?(C({loading:!1,message:"Email already exists. Please use a different one.",available:!1}),P(!1),v(!1),A("")):(C({loading:!1,message:"Email is available. Click 'Send OTP' to verify.",available:!0}),P(!1),v(!1),A(""))}catch{C({loading:!1,message:"Error checking email availability",available:!1}),P(!1),v(!1),A("")}},ua=async a=>{if(!a.trim()){W({loading:!1,message:"",available:null});return}if(!/^[0-9]{10}$/.test(a)){W({loading:!1,message:"Enter a valid 10-digit mobile number",available:!1});return}if(a===Re){W({loading:!1,message:"",available:!0});return}try{W({loading:!0,message:"",available:null});const i=await(await G(`${u}/api/user/check-mobile/${encodeURIComponent(a.trim())}`)).json();W({loading:!1,message:i.message,available:i.available})}catch{W({loading:!1,message:"Error checking mobile availability",available:!1})}},_a=a=>{te&&clearTimeout(te);const s=setTimeout(()=>ma(a),300);Aa(s)},Fa=a=>{se&&clearTimeout(se);const s=setTimeout(()=>ua(a),300);Ea(s)},fa=async()=>{if(!o.email){E("Please enter an email address first");return}if(ca){na(!0),E("");try{const s=await(await fetch(`${u}/api/auth/send-profile-email-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.email})})).json();s.success?(v(!0),f.success("OTP sent successfully to your email"),C({loading:!1,available:!0}),Oe(30),ze(!1)):E(s.message)}catch{E("Failed to send OTP. Please try again.")}finally{na(!1)}}},Ma=async()=>{if(!be){E("Please enter the OTP");return}oa(!0),E("");try{const s=await(await fetch(`${u}/api/auth/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.email,otp:be})})).json();s.success?(P(!0),f.success("Email verified successfully!"),v(!1),A(""),ve(!1),C({loading:!1,message:"Email verified successfully!",available:!0})):E(s.message)}catch{E("Failed to verify OTP. Please try again.")}finally{oa(!1)}},le=a=>{const{id:s,value:i}=a.target;U({...o,[s]:i}),s==="email"?B(""):s==="mobileNumber"&&V(""),s==="email"?(b&&(P(!1),v(!1),A("")),_a(i)):s==="mobileNumber"&&Fa(i)},Ra=async a=>{if(a.preventDefault(),L(""),Z(!1),B(""),V(""),!o.email||!o.email.trim()){B("Please provide valid email id");return}if(c.available===!1){B("Email already exists. Please use a different one.");return}if(p.available===!1){V("Mobile number already exists. Please use a different one.");return}if(!o.mobileNumber||!/^[0-9]{10}$/.test(o.mobileNumber)){V("Please provide a valid 10-digit mobile number");return}if(o.email!==y&&!$){B("Please verify your new email with OTP before saving.");return}k(!0)},ha=async()=>{if(Me(""),!Fe){Me("Password is required");return}N(!0);try{d(rt());const a=`${u}/api/user/update/${t._id}`,s=lt({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,avatar:o.avatar===void 0?"":o.avatar,password:Fe})}),l=await(await fetch(a,s)).json();if(console.log("Profile update response:",l),l.status==="email_exists"){f.error("Email already registered. Please use a different one."),B("Email already registered. Please use a different one."),d(ne("Email already registered. Please use a different one.")),N(!1),k(!1),S("");return}if(l.status==="mobile_exists"){f.error("Mobile number already in use. Please choose another one."),V("Mobile number already in use. Please choose another one."),d(ne("Mobile number already in use. Please choose another one.")),N(!1),k(!1),S("");return}if(l.status==="mobile_invalid"){V("Please provide a valid 10-digit mobile number"),d(ne("Please provide a valid 10-digit mobile number")),N(!1),k(!1),S("");return}if(l.status==="invalid_password"){k(!1),S(""),N(!1),f.error("You have been signed out for security reasons. No changes were made to your profile."),d(R());try{const h=await(await fetch(`${u}/api/auth/signout`,{credentials:"include"})).json();h.success===!1?d(I(h.message)):(d(O(h)),Ce&&Ce.purge&&await Ce.purge(),Na(),localStorage.removeItem("accessToken"),document.cookie="access_token=; Max-Age=0; path=/; domain="+window.location.hostname+"; secure; samesite=None")}catch(m){d(I(m.message))}setTimeout(()=>{x("/sign-in",{replace:!0})},800);return}if(l.status==="success"){const m={...l.updatedUser,avatar:l.updatedUser.avatar||"",isGeneratedMobile:l.updatedUser.mobileNumber&&l.updatedUser.mobileNumber!==Re?!1:l.updatedUser.isGeneratedMobile};d(nt(m)),l.updatedUser.mobileNumber&&l.updatedUser.mobileNumber!==Re&&la(l.updatedUser.mobileNumber),console.log("[Profile] Emitting profileUpdated socket event:",{userId:m._id,username:m.username,avatar:m.avatar,mobileNumber:m.mobileNumber,email:m.email}),console.log("[Profile] Socket connected:",He.connected),console.log("[Profile] Socket ID:",He.id),He.emit("profileUpdated",{userId:m._id,username:m.username,avatar:m.avatar,mobileNumber:m.mobileNumber,email:m.email},h=>{console.log("[Profile] Socket event acknowledgment:",h)}),Z(!0),Ee(!1),N(!1),k(!1),S(""),f.success("Profile Updated Successfully!!"),setTimeout(()=>{Z(!1)},3e3);return}if(l.success===!1||l.status==="error"){L(l.message||"Profile Update Failed!"),d(ne(l.message)),N(!1),k(!1),S("");return}console.log("Unexpected response:",l),L("Profile Update Failed!"),N(!1),k(!1),S("")}catch(a){console.log("Profile update error:",a),L("Profile Update Failed!"),d(ne(a.message)),N(!1),k(!1),S("")}},Oa=async()=>{if(t.isDefaultAdmin){oe(!0);return}K(!0)},za=async()=>{if(Q(""),!Ie){Q("Password is required");return}try{d(it());const a=`${u}/api/user/delete/${t._id}`,s={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:Ie}),credentials:"include"},i=await fetch(a,s);let l={};try{l=await i.json()}catch{l={}}if(i.status===401){K(!1),f.error("For your security, you've been signed out automatically."),d(R());const h=await(await fetch(`${u}/api/auth/signout`,{credentials:"include"})).json();h.success===!1?d(I(h.message)):d(O(h)),x("/sign-in",{replace:!0});return}if(l.message&&l.message.toLowerCase().includes("password")){K(!1),f.error("For your security, you've been signed out automatically."),d(R());const h=await(await fetch(`${u}/api/auth/signout`,{credentials:"include"})).json();h.success===!1?d(I(h.message)):d(O(h)),x("/sign-in",{replace:!0});return}if(l.success===!1||i.status!==200){Q(l.message||"Account deletion failed"),d(ka(l.message));return}d(Sa(l)),K(!1),f.success("Account deleted successfully. Thank you for being with us â€” we hope to serve you again in the future!"),x("/")}catch(a){Q("Account deletion failed"),d(ka(a.message))}},La=async()=>{try{ce(!0);const a=await fetch(`${u}/api/user/approved-admins/${t._id}`,{credentials:"include"}),s=await a.json();a.ok?Ca(s):f.error(s.message||"Failed to fetch admins")}catch{f.error("Error fetching admins")}finally{ce(!1)}},Ha=async()=>{if(!de){f.error("Please select an admin to transfer default admin rights to");return}ee(!0)},Ba=async()=>{if(fe(""),!ue){fe("Password is required");return}try{Ge(!0);const a=await fetch(`${u}/api/user/verify-password/${t._id}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({password:ue})});let s={};try{s=await a.json()}catch{s={}}if(a.status===401){ee(!1),f.error("Your session has expired. Please sign in again. No admin rights are Transferred"),d(R());const F=await(await fetch(`${u}/api/auth/signout`,{credentials:"include"})).json();F.success===!1?d(I(F.message)):d(O(F)),x("/sign-in",{replace:!0});return}if(!a.ok||s.success===!1){ee(!1),f.error("For your security, you've been signed out automatically."),d(R());const F=await(await fetch(`${u}/api/auth/signout`,{credentials:"include"})).json();F.success===!1?d(I(F.message)):d(O(F)),x("/sign-in",{replace:!0});return}const i=await fetch(`${u}/api/user/transfer-default-admin`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({currentAdminId:t._id,newDefaultAdminId:de})}),l=await i.json();if(!i.ok){f.error(l.message||"Failed to transfer default admin rights");return}const m=await fetch(`${u}/api/user/delete/${t._id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({password:ue})}),h=await m.json();if(!m.ok){f.error(h.message||"Failed to delete account after transfer");return}d(Sa(h)),oe(!1),ee(!1),f.success("Admin rights are transferred and account deleted successfully!"),x("/")}catch{fe("Account deletion failed")}finally{Ge(!1)}},Va=async a=>{a.preventDefault();try{d(R());const i=await(await fetch(`${u}/api/auth/signout`,{credentials:"include"})).json();i.success===!1?d(I(i.message)):(d(O(i)),await Ce.purge(),Na(),localStorage.removeItem("accessToken"),document.cookie="access_token=; Max-Age=0; path=/; domain="+window.location.hostname+"; secure; samesite=None",f.info("You have been signed out."),await new Promise(l=>setTimeout(l,50)),x("/sign-in",{replace:!0}))}catch(s){d(I(s.message))}},Wa=()=>{t&&(t.role==="admin"||t.role==="rootadmin")?x("/admin/my-listings"):x("/user/my-listings")},Ya=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});r.useEffect(()=>{X&&La()},[X]);const Ga=async()=>{try{ce(!0);const a=await fetch(`${u}/api/admin/management/admins`,{credentials:"include"}),s=await a.json();a.ok?_e(s.filter(i=>i.role==="admin"||i.role==="rootadmin")):_e([])}catch{_e([])}finally{ce(!1)}},Ja=()=>{ae(!0),H(""),ea(""),Qe(""),Ga()},qa=async()=>{if(H(""),!he){H("Please select an admin to transfer rights to.");return}if(!pe){H("Password is required.");return}sa(!0);try{const a=await fetch(`${u}/api/admin/transfer-rights`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({targetAdminId:he,password:pe})}),s=await a.json();if(a.status===401&&s.error==="invalidPassword"){ae(!1),f.error("For your security, you've been signed out automatically."),d(R());const l=await(await fetch(`${u}/api/auth/signout`,{credentials:"include"})).json();l.success===!1?d(I(l.message)):d(O(l)),x("/sign-in",{replace:!0});return}if(!a.ok){H(s.message||"Failed to transfer rights.");return}f.success(s.message||"Admin rights transferred successfully!"),ae(!1),x("/sign-in",{replace:!0})}catch{H("Failed to transfer rights.")}finally{sa(!1)}};if(r.useEffect(()=>{g&&t&&(U({username:t.username||"",email:t.email||"",mobileNumber:t.mobileNumber?String(t.mobileNumber):"",address:t.address||"",gender:t.gender||"",avatar:t.avatar||""}),t.email&&ma(t.email),t.mobileNumber&&ua(t.mobileNumber))},[g,t]),r.useEffect(()=>{async function a(){if(t&&t._id)try{console.log("[fetchLatestUser] Fetching user data for:",t._id);const s=await fetch(`${u}/api/user/id/${t._id}`);if(s.ok){const i=await s.json();console.log("[fetchLatestUser] Got user:",i),d({type:"user/signInSuccess",payload:i})}else console.error("[fetchLatestUser] Failed to fetch user")}catch(s){console.error("[fetchLatestUser] Error:",s)}}a()},[]),!t||!t.username||!t.email)return e.jsx("div",{className:"text-center text-red-600 mt-10",children:"Profile data is missing or could not be loaded. Please refresh or sign in again."});if(D&&!g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-100",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 mx-auto"}),e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent absolute top-0 left-1/2 transform -translate-x-1/2"}),e.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 ${n.pulse}`,children:e.jsx(we,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("p",{className:`mt-4 text-gray-600 font-medium ${n.pulse}`,children:"Loading profile..."}),e.jsxs("div",{className:"flex justify-center mt-2 space-x-1",children:[e.jsx("div",{className:`w-2 h-2 bg-blue-600 rounded-full ${n.bounce} animation-delay-0`}),e.jsx("div",{className:`w-2 h-2 bg-blue-600 rounded-full ${n.bounce} animation-delay-150`}),e.jsx("div",{className:`w-2 h-2 bg-blue-600 rounded-full ${n.bounce} animation-delay-300`})]})]})});r.useEffect(()=>{g&&D&&N(!1)},[g,D]);const Za=a=>{const s=a.target.files[0];if(!s)return;const i=new FileReader;i.onload=l=>{U(m=>({...m,avatar:l.target.result}))},i.readAsDataURL(s)},[Y,je]=r.useState({style:"avataaars",filters:{}}),pa=()=>{const a=`https://api.dicebear.com/9.x/${Y.style}/svg`,s=Object.entries(Y.filters).filter(([i,l])=>l!=null&&l!==""&&!(Array.isArray(l)&&l.length===0)).map(([i,l])=>Array.isArray(l)?`${i}=${l.join(",")}`:typeof l=="boolean"?`${i}=${l}`:`${i}=${encodeURIComponent(l)}`).join("&");return s?`${a}?${s}`:a};return e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-100 min-h-screen py-10 px-2 md:px-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:`bg-white rounded-xl shadow-lg p-8 mb-6 ${T?n.fadeInUp:"opacity-0 translate-y-8"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:space-x-6 w-full text-center sm:text-left mb-4 md:mb-0",children:[e.jsxs("div",{className:`relative flex-shrink-0 mx-auto sm:mx-0 group ${T?n.scaleIn+" animation-delay-150":"opacity-0 scale-95"}`,children:[e.jsx("div",{className:"transform transition-all duration-300 group-hover:scale-110",children:e.jsx(xa,{user:t,size:"h-24 w-24",textSize:"text-2xl"})}),t.role==="admin"&&e.jsx("div",{className:`absolute -top-2 -right-2 bg-purple-500 text-white rounded-full p-2 ${n.bounceIn} animation-delay-300 ${n.float}`,children:e.jsx(Ne,{className:"w-4 h-4"})}),t.isDefaultAdmin&&e.jsx("div",{className:`absolute -bottom-2 -right-2 bg-red-500 text-white rounded-full p-2 ${n.bounceIn} animation-delay-450 ${n.pulse}`,children:e.jsx(Ne,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:`mt-4 sm:mt-0 w-full ${T?n.fadeInLeft+" animation-delay-300":"opacity-0 -translate-x-8"}`,children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 flex flex-wrap items-center justify-center sm:justify-start",children:[e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:t.username}),t.role==="admin"&&e.jsx("span",{className:"ml-2 bg-purple-100 text-purple-800 text-sm px-3 py-1 rounded-full font-medium transform transition-all duration-300 hover:scale-110 hover:bg-purple-200",children:"Admin"}),t.isDefaultAdmin&&e.jsx("span",{className:"ml-2 bg-red-100 text-red-800 text-sm px-3 py-1 rounded-full font-medium transform transition-all duration-300 hover:scale-110 hover:bg-red-200 animate-pulse",children:"Default Admin"})]}),e.jsxs("p",{className:"text-gray-600 flex flex-wrap items-center justify-center sm:justify-start break-all transition-all duration-300 hover:text-blue-600",children:[e.jsx(ba,{className:"w-4 h-4 mr-2 transform transition-all duration-300 hover:scale-125"}),t.email]}),e.jsxs("p",{className:"text-gray-600 flex flex-wrap items-center justify-center sm:justify-start break-all transition-all duration-300 hover:text-green-600",children:[e.jsx(ya,{className:"w-4 h-4 mr-2 transform transition-all duration-300 hover:scale-125"}),t.mobileNumber&&t.mobileNumber!=="0000000000"?`+91 ${t.mobileNumber.slice(0,5)} ${t.mobileNumber.slice(5)}`:"Mobile number not provided",t.isGeneratedMobile&&e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Generated for Google signup)"})]}),e.jsxs("p",{className:"text-gray-600 flex flex-wrap items-center justify-center sm:justify-start break-all transition-all duration-300 hover:text-purple-600",children:[e.jsx(we,{className:"w-4 h-4 mr-2 transform transition-all duration-300 hover:scale-125"}),t.gender||"Gender not provided"]}),e.jsxs("p",{className:"text-gray-600 flex flex-wrap items-center justify-center sm:justify-start break-all transition-all duration-300 hover:text-blue-600",children:[e.jsx(ke,{className:"w-4 h-4 mr-2 transform transition-all duration-300 hover:scale-125"}),t.address||"Address not provided"]}),(!t.gender||!t.address||!t.mobileNumber)&&e.jsx("p",{className:"text-sm text-amber-600 text-center sm:text-left mt-2 transition-all duration-300 hover:text-amber-700 font-medium",children:"(Complete your profile)"}),e.jsxs("p",{className:"text-sm text-gray-500 text-center sm:text-left mt-1 transition-all duration-300 hover:text-gray-700",children:["Member since ",Ya(t.createdAt)]})]})]}),e.jsxs("button",{onClick:()=>Ee(!g),className:`bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 sm:px-6 py-2 sm:py-3 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all transform hover:scale-105 hover:rotate-1 shadow-lg font-semibold flex items-center gap-1 sm:gap-2 text-sm sm:text-base w-full sm:w-auto justify-center group ${T?n.fadeInRight+" animation-delay-450":"opacity-0 translate-x-8"}`,children:[e.jsx(J,{className:`w-4 h-4 transition-transform duration-300 ${g?"rotate-180":""} group-hover:${n.wiggle}`}),g?"Cancel Edit":"Edit Profile"]})]})}),g&&e.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-8 mb-6 ${n.slideInUp}`,children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center group",children:[e.jsx(J,{className:`w-5 h-5 mr-2 text-blue-600 transition-transform duration-300 group-hover:${n.wiggle}`}),e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Edit Profile Information"})]}),e.jsxs("form",{onSubmit:Ra,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"mb-2",children:e.jsx(xa,{user:{...t,avatar:o.avatar},size:"w-24 h-24",textSize:"text-2xl"})}),g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-2",children:[Be.map((a,s)=>e.jsx("button",{type:"button",onClick:()=>U({...o,avatar:a}),className:`w-12 h-12 rounded-full border-2 transition-all duration-300 transform hover:scale-110 hover:shadow-lg ${o.avatar===a?"border-blue-500 shadow-lg scale-105":"border-gray-300 hover:border-blue-400"} focus:outline-none focus:ring-2 focus:ring-blue-400 ${n.bounceIn} animation-delay-${s*50}`,children:e.jsx("img",{src:a,alt:`Avatar ${s+1}`,className:"w-full h-full rounded-full object-cover transition-all duration-300 hover:brightness-110"})},a)),e.jsxs("label",{className:`w-12 h-12 rounded-full border-2 border-gray-300 flex items-center justify-center cursor-pointer bg-gray-100 hover:bg-gray-200 transition-all duration-300 transform hover:scale-110 hover:shadow-lg hover:border-blue-400 group ${n.bounceIn} animation-delay-${Be.length*50}`,children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Za}),e.jsx(J,{className:`text-gray-500 group-hover:text-blue-500 transition-colors duration-300 group-hover:${n.wiggle}`})]}),e.jsx("button",{type:"button",onClick:()=>U({...o,avatar:""}),className:`w-12 h-12 rounded-full border-2 border-red-400 flex items-center justify-center bg-red-50 hover:bg-red-100 transition-all duration-300 transform hover:scale-110 hover:shadow-lg hover:border-red-500 group ${n.bounceIn} animation-delay-${(Be.length+1)*50}`,children:e.jsx(va,{className:`text-red-500 group-hover:text-red-600 transition-colors duration-300 group-hover:${n.wiggle}`})})]}),e.jsxs("div",{className:"mt-4 w-full flex flex-col items-center",children:[e.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Or create a custom DiceBear avatar:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center w-full",children:[e.jsx("label",{className:"font-medium text-sm",children:"Style:"}),e.jsx("select",{className:"border p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",value:Y.style,onChange:a=>{je({style:a.target.value,filters:{}})},children:mt.map(a=>e.jsx("option",{value:a.key,children:a.label},a.key))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2 w-full max-w-2xl",children:[ut.map(a=>!$e.properties[a]||a==="style"?null:a==="seed"?e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsx("label",{className:"text-xs font-medium mb-1",children:a}),e.jsx("input",{type:"text",className:"border p-2 rounded-lg",value:Y.filters[a]||"",onChange:i=>je(l=>({...l,filters:{...l.filters,[a]:i.target.value}})),placeholder:"Enter a name or keyword (e.g. John, robot, flower...)"})]},a):null),e.jsxs("div",{className:"flex items-end gap-6 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs font-medium",children:"flip"}),e.jsx("input",{type:"checkbox",checked:!!Y.filters.flip,onChange:a=>je(s=>({...s,filters:{...s.filters,flip:a.target.checked}}))})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-medium mb-1",children:"rotate"}),e.jsx("input",{type:"number",className:"border p-2 rounded-lg w-24",value:Y.filters.rotate??$e.properties.rotate.default??"",min:$e.properties.rotate.minimum,max:$e.properties.rotate.maximum,onChange:a=>je(s=>({...s,filters:{...s.filters,rotate:a.target.value===""?void 0:Number(a.target.value)}}))})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col items-center",children:[e.jsx("img",{src:pa(),alt:"DiceBear Avatar Preview",className:"w-24 h-24 rounded-full border-2 border-blue-300 shadow"}),e.jsx("button",{type:"button",className:"mt-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all font-semibold",onClick:async()=>{const a=pa();U({...o,avatar:a});try{const i=await(await fetch(`${u}/api/user/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({avatar:a})})).json();i.status==="success"?f.success("Avatar updated!"):i.status==="error"&&f.error(i.message||"Failed to update avatar.")}catch{f.error("Failed to update avatar.")}},children:"Use this avatar"})]})]})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Note: Please upload a profile image below 75KB only for best performance."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Username"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"username",placeholder:"Enter username",value:o.username||"",onChange:le,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all pr-12"}),o.username&&o.username.trim()&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-600 z-20",children:e.jsx(j,{className:"text-xl"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),"Email Address"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",id:"email",placeholder:"Enter email address",value:o.email||"",onChange:le,readOnly:!b||b&&_,className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:border-transparent transition-all ${!b||b&&_?"bg-gray-100 cursor-not-allowed border-green-500 pr-20":c.available===!1?"border-red-500 focus:ring-red-500 pr-12":c.available===!0?"border-green-500 focus:ring-green-500 pr-12":"border-gray-300 focus:ring-blue-500 pr-12"}`}),c.loading&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]})}),c.available===!0&&!c.loading&&!$&&o.email!==y&&(b||_)&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-600 z-20",children:e.jsx(j,{className:"text-xl"})}),c.available===!0&&!c.loading&&o.email===y&&!b&&e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2 z-20",children:[e.jsx("button",{type:"button",onClick:()=>ve(!0),className:"text-blue-600 hover:text-blue-800 transition-colors duration-200 p-1 rounded hover:bg-blue-50",title:"Edit email",children:e.jsx(J,{className:"text-sm"})}),e.jsx("div",{className:"text-green-600",children:e.jsx(j,{className:"text-xl"})})]}),c.available===!0&&!c.loading&&o.email===y&&b&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-600 z-20",children:e.jsx(j,{className:"text-xl"})}),c.available===!0&&!c.loading&&!$&&o.email!==y&&_&&e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2 z-20",children:[e.jsx("button",{type:"button",onClick:()=>{ve(!0),v(!1),P(!1)},className:"text-blue-600 hover:text-blue-800 transition-colors duration-200 p-1 rounded hover:bg-blue-50",title:"Edit email",children:e.jsx(J,{className:"text-sm"})}),e.jsx("div",{className:"text-blue-600",children:e.jsx(j,{className:"text-xl"})})]}),c.available===!0&&!c.loading&&!_&&!$&&o.email!==y&&b&&e.jsx("button",{type:"button",onClick:fa,disabled:ye||!ca||!o.email,className:"absolute right-16 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap z-10",children:ye?"Sending...":"Send OTP"}),$&&o.email!==y&&!b&&!c.loading&&e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2 z-20",children:[e.jsx("button",{type:"button",onClick:()=>ve(!0),className:"text-blue-600 hover:text-blue-800 transition-colors duration-200 p-1 rounded hover:bg-blue-50",title:"Edit email",children:e.jsx(J,{className:"text-sm"})}),e.jsx("div",{className:"text-green-600",children:e.jsx(j,{className:"text-xl"})})]}),$&&o.email!==y&&b&&!c.loading&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 z-20",children:e.jsx("div",{className:"text-green-600",children:e.jsx(j,{className:"text-xl"})})}),c.available===!1&&!c.loading&&b&&!_&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 z-20",children:e.jsx(Se,{className:"h-5 w-5 text-red-500"})})]}),_&&!$&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["OTP sent to ",o.email]}),_&&!$&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter OTP"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter 6-digit OTP",id:"otp",value:be,onChange:a=>A(a.target.value),maxLength:"6",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),e.jsx("button",{type:"button",onClick:Ma,disabled:ia||!be,className:"w-full sm:w-auto px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:ia?"Verifying...":"Verify OTP"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Enter the 6-digit code sent to your email"}),e.jsx("div",{className:"flex items-center gap-2",children:re>0?e.jsxs("span",{className:"text-xs text-gray-500",children:["Resend in ",Math.floor(re/60),":",(re%60).toString().padStart(2,"0")]}):e.jsx("button",{type:"button",onClick:fa,disabled:ye,className:"text-xs text-blue-600 hover:text-blue-800 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:ye?"Sending...":"Resend OTP"})})]}),da&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:da})]}),ge&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:ge}),c.message&&!ge&&e.jsx("div",{className:`text-sm mt-1 ${c.available===!0?"text-green-600":c.available===!1?"text-red-600":"text-gray-600"}`,children:c.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ya,{className:"w-4 h-4 mr-2"}),"Mobile Number"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",id:"mobileNumber",placeholder:"Enter 10-digit mobile number",value:o.mobileNumber||"",onChange:le,pattern:"[0-9]{10}",maxLength:"10",className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:border-transparent transition-all ${p.available===!1?"border-red-500 focus:ring-red-500":p.available===!0?"border-green-500 focus:ring-green-500":"border-gray-300 focus:ring-blue-500"}`}),p.loading&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]})}),p.available===!0&&!p.loading&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(j,{className:"h-5 w-5 text-green-500"})}),p.available===!1&&!p.loading&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Se,{className:"h-5 w-5 text-red-500"})})]}),xe&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:xe}),p.message&&!xe&&e.jsx("div",{className:`text-sm mt-1 ${p.available===!0?"text-green-600":p.available===!1?"text-red-600":"text-gray-600"}`,children:p.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Gender"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"gender",value:o.gender||"",onChange:le,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all pr-12",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]}),o.gender&&o.gender.trim()&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-600 z-20",children:e.jsx(j,{className:"text-xl"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Address"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"address",placeholder:"Enter your address",value:o.address||"",onChange:le,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all pr-12"}),o.address&&o.address.trim()&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-600 z-20",children:e.jsx(j,{className:"text-xl"})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{Ee(!1),P(!1),v(!1),A(""),E(""),Oe(0),ze(!0)},className:"bg-gradient-to-r from-gray-500 to-gray-600 text-white px-6 py-3 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all transform hover:scale-105 shadow-lg font-semibold flex items-center gap-2",children:"Cancel"}),e.jsx("button",{type:"submit",className:`bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all transform hover:scale-105 shadow-lg font-semibold flex items-center gap-2 ${D||c.loading||p.loading||c.available===!1||p.available===!1||o.email!==y&&!$?"opacity-60 cursor-not-allowed transform-none":""}`,disabled:D||c.loading||p.loading||c.available===!1||p.available===!1||o.email!==y&&!$,children:D?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Saving..."]}):"Save Changes"})]}),z&&!ge&&!xe&&e.jsx("div",{className:"text-red-600 text-sm mt-3",children:z})]})]}),!g&&Ae&&e.jsx("div",{className:"text-green-600 text-sm mb-6",children:"Profile updated successfully!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 text-center group hover:shadow-2xl transition-all duration-500 hover:scale-105 hover:-translate-y-2 ${T?n.scaleIn+" animation-delay-450":"opacity-0 scale-95"}`,children:[e.jsx("div",{className:`bg-blue-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-200 transition-all duration-300 ${n.float} group-hover:scale-110`,children:e.jsx(ke,{className:"w-6 h-6 text-blue-600 group-hover:text-blue-700 transition-colors duration-300"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 group-hover:text-blue-600 transition-colors duration-300",children:Le?e.jsx(Ve,{end:w.listings,delay:500}):w.listings}),e.jsx("p",{className:"text-gray-600 group-hover:text-blue-500 transition-colors duration-300",children:"My Listings"})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 text-center group hover:shadow-2xl transition-all duration-500 hover:scale-105 hover:-translate-y-2 ${T?n.scaleIn+" animation-delay-600":"opacity-0 scale-95"}`,children:[e.jsx("div",{className:`bg-green-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-green-200 transition-all duration-300 ${n.float} group-hover:scale-110`,children:e.jsx(ja,{className:"w-6 h-6 text-green-600 group-hover:text-green-700 transition-colors duration-300"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 group-hover:text-green-600 transition-colors duration-300",children:Le?e.jsx(Ve,{end:w.appointments,delay:650}):w.appointments}),e.jsx("p",{className:"text-gray-600 group-hover:text-green-500 transition-colors duration-300",children:"Appointments"})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 text-center group hover:shadow-2xl transition-all duration-500 hover:scale-105 hover:-translate-y-2 ${T?n.scaleIn+" animation-delay-750":"opacity-0 scale-95"}`,children:[e.jsx("div",{className:`bg-red-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-red-200 transition-all duration-300 ${n.heartbeat} group-hover:scale-110`,children:e.jsx(wa,{className:"w-6 h-6 text-red-600 group-hover:text-red-700 transition-colors duration-300"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 group-hover:text-red-600 transition-colors duration-300",children:Le?e.jsx(Ve,{end:w.wishlist,delay:800}):w.wishlist}),e.jsx("p",{className:"text-gray-600 group-hover:text-red-500 transition-colors duration-300",children:"Wishlist Items"})]})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-8 mb-6 ${T?n.fadeInUp+" animation-delay-300":"opacity-0 translate-y-8"}`,children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Quick Actions"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:Wa,className:`bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 hover:shadow-lg flex flex-col items-center group ${n.bounceIn} animation-delay-450`,children:[e.jsx(ke,{className:`w-5 h-5 mb-1 transition-transform duration-300 group-hover:${n.bounce}`}),e.jsx("span",{className:"font-medium text-sm",children:"My Listings"})]}),e.jsxs(M,{to:t.role==="admin"||t.role==="rootadmin"?"/admin/appointments":"/user/my-appointments",className:`bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 hover:shadow-lg flex flex-col items-center group ${n.bounceIn} animation-delay-600`,children:[e.jsx(ja,{className:`w-5 h-5 mb-1 transition-transform duration-300 group-hover:${n.bounce}`}),e.jsx("span",{className:"font-medium text-sm",children:t.role==="admin"||t.role==="rootadmin"?"Appointments":"My Appointments"})]}),e.jsxs(M,{to:t.role==="admin"||t.role==="rootadmin"?"/admin/wishlist":"/user/wishlist",className:`bg-red-500 text-white p-3 rounded-lg hover:bg-red-600 transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 hover:shadow-lg flex flex-col items-center group ${n.bounceIn} animation-delay-750`,children:[e.jsx(wa,{className:`w-5 h-5 mb-1 transition-transform duration-300 group-hover:${n.heartbeat}`}),e.jsx("span",{className:"font-medium text-sm",children:"My Wishlist"})]}),e.jsxs(M,{to:t.role==="admin"||t.role==="rootadmin"?"/admin/reviews":"/user/reviews",className:`bg-yellow-500 text-white p-3 rounded-lg hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 hover:shadow-lg flex flex-col items-center group ${n.bounceIn} animation-delay-900`,children:[e.jsx(at,{className:`w-5 h-5 mb-1 transition-transform duration-300 group-hover:${n.pulse}`}),e.jsx("span",{className:"font-medium text-sm",children:t.role==="admin"||t.role==="rootadmin"?"Reviews":"My Reviews"})]})]})]}),e.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-8 ${T?n.fadeInUp+" animation-delay-600":"opacity-0 translate-y-8"}`,children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Account Management"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>x(t.role==="admin"||t.role==="rootadmin"?"/admin/change-password":"/user/change-password"),className:`w-full bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center font-semibold group ${n.slideInUp} animation-delay-750`,children:[e.jsx(tt,{className:`w-4 h-4 mr-2 transition-transform duration-300 group-hover:${n.wiggle}`}),"Change Password"]}),(t.role==="admin"||t.role==="rootadmin")&&e.jsx("button",{onClick:()=>x("/admin/management"),className:`w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center font-semibold group ${n.slideInUp} animation-delay-900`,children:e.jsx("span",{className:"group-hover:animate-pulse",children:"Accounts"})}),t.isDefaultAdmin&&e.jsxs("button",{onClick:Ja,className:`w-full bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center font-semibold group ${n.slideInUp} animation-delay-1050`,children:[e.jsx(Ne,{className:`w-4 h-4 mr-2 transition-transform duration-300 group-hover:${n.bounce} text-yellow-200`}),"Transfer Rights"]}),t.isDefaultAdmin&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-4 w-4 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-2",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Note:"})," You must transfer your default admin rights to another admin before you can delete your account."]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:Va,className:`bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center font-semibold group ${n.slideInUp} animation-delay-1200`,children:[e.jsx(st,{className:"w-4 h-4 mr-2 transition-transform duration-300 group-hover:-translate-x-1"}),"Sign Out"]}),e.jsxs("button",{onClick:Oa,className:`bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center font-semibold group ${n.slideInUp} animation-delay-1350`,children:[e.jsx(va,{className:`w-4 h-4 mr-2 transition-transform duration-300 group-hover:${n.wiggle}`}),"Delete Account"]})]})]})]})]}),X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsx("div",{className:`bg-white rounded-xl shadow-xl max-w-md w-full max-h-[80vh] overflow-y-auto ${n.scaleIn}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Transfer Default Admin Rights"}),e.jsx("button",{onClick:()=>oe(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Se,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"As the default admin, you must select another approved admin to transfer your default admin rights before deleting your account."}),Ye?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):We.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-500",children:"No other approved admins found."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You cannot delete your account until another admin is approved."})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Admin to Transfer Rights To:"}),e.jsxs("select",{value:de,onChange:a=>$a(a.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Choose an admin..."}),We.map(a=>e.jsxs("option",{value:a._id,children:[a.username," (",a.email,")"]},a._id))]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>oe(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ha,disabled:!de||me,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:me?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Transfer & Delete"]})})]})]})})}),Te&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsx("div",{className:`bg-white rounded-xl shadow-xl max-w-md w-full ${n.scaleIn}`,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Confirm Account Deletion"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Please enter your password to confirm account deletion. This action cannot be undone."}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),za()},children:[e.jsx("input",{type:"password",className:"w-full p-3 border border-gray-300 rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter your password",value:Ie,onChange:a=>Je(a.target.value)}),qe&&e.jsx("div",{className:"text-red-600 text-sm mb-2",children:qe}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{K(!1),Je(""),Q("")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Delete"})]})]})]})})}),Ue&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsx("div",{className:`bg-white rounded-xl shadow-xl max-w-md w-full ${n.scaleIn}`,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Confirm Account Deletion"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Please enter your password to confirm account deletion after transferring default admin rights. This action cannot be undone."}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),Ba()},children:[e.jsx("input",{type:"password",className:"w-full p-3 border border-gray-300 rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter your password",value:ue,onChange:a=>Ze(a.target.value)}),Xe&&e.jsx("div",{className:"text-red-600 text-sm mb-2",children:Xe}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{ee(!1),Ze(""),fe("")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",disabled:me,children:me?"Processing...":"Transfer & Delete"})]})]})]})})}),Pa&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsx("div",{className:`bg-white rounded-xl shadow-xl max-w-md w-full ${n.scaleIn}`,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Confirm Profile Update"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Please enter your password to confirm the profile changes."}),e.jsx("input",{type:"password",className:"w-full p-3 border border-gray-300 rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password",value:Fe,onChange:a=>S(a.target.value),onKeyDown:a=>{a.key==="Enter"&&(a.preventDefault(),ha())}}),ra&&e.jsx("div",{className:"text-red-600 text-sm mb-2",children:ra}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{k(!1),S(""),Me("")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ha,disabled:D,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Update Profile"})]})]})})}),De&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsx("div",{className:`bg-white rounded-xl shadow-xl max-w-md w-full max-h-[80vh] overflow-y-auto ${n.scaleIn}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Transfer Root Admin Rights"}),e.jsx("button",{onClick:()=>ae(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Se,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Select an admin to transfer your root admin rights. You will remain an admin after transfer."}),Ye?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Ke.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-500",children:"No other admins found."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You cannot transfer rights until another admin exists."})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Admin to Transfer Rights To:"}),e.jsxs("select",{value:he,onChange:a=>Qe(a.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Choose an admin..."}),Ke.map(a=>e.jsxs("option",{value:a._id,children:[a.username," (",a.email,")"]},a._id))]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password:"}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),qa()},children:[e.jsx("input",{type:"password",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Enter your password",value:pe,onChange:a=>ea(a.target.value)}),aa&&e.jsx("div",{className:"text-red-600 text-sm mt-2",children:aa}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>ae(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!he||!pe||ta,className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:ta?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Transfer Rights"]})})]})]})]})]})})}),e.jsx(ot,{}),e.jsx("div",{className:"mt-8 flex flex-col items-center space-y-2 text-sm text-gray-600",children:t&&(t.role==="admin"||t.role==="rootadmin")?e.jsxs(e.Fragment,{children:[e.jsx(M,{to:"/admin/terms",className:"text-blue-600 hover:underline",children:"Admin Terms & Conditions"}),e.jsx(M,{to:"/admin/privacy",className:"text-blue-600 hover:underline",children:"Admin Privacy Policy"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{to:"/user/terms",className:"text-blue-600 hover:underline",children:"User Terms & Conditions"}),e.jsx(M,{to:"/user/privacy",className:"text-blue-600 hover:underline",children:"User Privacy Policy"})]})})]})}export{pt as default};
