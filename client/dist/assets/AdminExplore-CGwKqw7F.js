import{h as k,u as L,r as i,j as e,i as S}from"./index-DNwTbvcj.js";import{L as C}from"./ListingItem-DyogqT08.js";import{C as A}from"./ContactSupportWrapper-CspIlt0B.js";import{L as _}from"./LocationSelector-C8WdPudO.js";import"./index-BM_NuVbS.js";import"./addressMasking-3vIUwCOC.js";import"./countries_states_cities-CCOM4uJJ.js";const g="https://urbansetu.onrender.com";function I(){const d=k(),f=L(),[r,l]=i.useState({searchTerm:"",type:"all",parking:!1,furnished:!1,offer:!1,sort:"createdAt",order:"desc",minPrice:"",maxPrice:"",city:"",state:"",bedrooms:"",bathrooms:""}),[c,h]=i.useState([]),[m,p]=i.useState(!1),[b,u]=i.useState(!1),[j,x]=i.useState({state:"",district:"",city:""});i.useEffect(()=>{const t=new URLSearchParams(d.search);l({searchTerm:t.get("searchTerm")||"",type:t.get("type")||"all",parking:t.get("parking")==="true",furnished:t.get("furnished")==="true",offer:t.get("offer")==="true",sort:t.get("sort")||"createdAt",order:t.get("order")||"desc",minPrice:t.get("minPrice")||"",maxPrice:t.get("maxPrice")||"",city:t.get("city")||"",state:t.get("state")||"",bedrooms:t.get("bedrooms")||"",bathrooms:t.get("bathrooms")||""}),x({state:t.get("state")||"",district:t.get("district")||"",city:t.get("city")||""}),(async()=>{p(!0);try{const o=await(await fetch(`${g}/api/listing/get?${t.toString()}`)).json();h(o),u(o.length>8)}catch(n){console.error("Error fetching listings:",n)}p(!1)})()},[d.search]);const s=t=>{const{name:a,value:n,checked:o,type:N}=t.target;l(P=>({...P,[a]:N==="checkbox"?o:n}))},y=t=>{t.preventDefault();const a=new URLSearchParams(r);f(`?${a.toString()}`)},v=async()=>{const t=new URLSearchParams(d.search);t.set("startIndex",c.length);const n=await(await fetch(`${g}/api/listing/get?${t.toString()}`)).json();h(o=>[...o,...n]),u(n.length>=8)},w=t=>{x(t),l(a=>({...a,state:t.state,district:t.district,city:t.city}))};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading properties..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-100 min-h-screen py-10 px-2 md:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow-lg p-6 relative",children:[e.jsx("h3",{className:"text-3xl font-extrabold text-blue-700 mb-6 text-center drop-shadow",children:"Explore Properties (Admin View)"}),e.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Search and filter all properties across the platform"}),e.jsxs("form",{onSubmit:y,className:"grid md:grid-cols-2 gap-4 bg-gray-100 p-4 rounded-lg mb-6",children:[e.jsx("input",{type:"text",name:"searchTerm",placeholder:"Search by property name, address, or description...",value:r.searchTerm,onChange:s,className:"p-2 border rounded-md w-full"}),e.jsxs("select",{name:"sort_order",onChange:t=>{const[a,n]=t.target.value.split("_");l(o=>({...o,sort:a,order:n}))},value:`${r.sort}_${r.order}`,className:"p-2 border rounded-md w-full",children:[e.jsx("option",{value:"regularPrice_desc",children:"Price high to low"}),e.jsx("option",{value:"regularPrice_asc",children:"Price low to high"}),e.jsx("option",{value:"createdAt_desc",children:"Latest"}),e.jsx("option",{value:"createdAt_asc",children:"Oldest"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(_,{value:j,onChange:w,mode:"search"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"type",value:"all",checked:r.type==="all",onChange:s})," ","All"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"type",value:"rent",checked:r.type==="rent",onChange:s})," ","Rent"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"type",value:"sale",checked:r.type==="sale",onChange:s})," ","Sale"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"parking",onChange:s,checked:r.parking})," ","Parking"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"furnished",onChange:s,checked:r.furnished})," ","Furnished"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"offer",onChange:s,checked:r.offer})," ","Offer"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",name:"minPrice",placeholder:"Min Price",value:r.minPrice,onChange:s,className:"p-2 border rounded-md w-full",min:0}),e.jsx("input",{type:"number",name:"maxPrice",placeholder:"Max Price",value:r.maxPrice,onChange:s,className:"p-2 border rounded-md w-full",min:0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",name:"bedrooms",placeholder:"Bedrooms",value:r.bedrooms,onChange:s,className:"p-2 border rounded-md w-full",min:1}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"Bathrooms",value:r.bathrooms,onChange:s,className:"p-2 border rounded-md w-full",min:1})]}),e.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all transform hover:scale-105 shadow-lg font-semibold flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-4-4m0 0A7 7 0 104 4a7 7 0 0013 13z"})}),"Search"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["All Properties (",c.length,")"]}),m&&e.jsx("p",{className:"text-center text-lg font-semibold text-blue-600 animate-pulse",children:"Loading..."}),!m&&c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("img",{src:S,alt:"No properties found",className:"w-72 h-72 object-contain mx-auto mb-0"}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your search criteria or filters"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:c.map(t=>e.jsx(C,{listing:t},t._id))}),b&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("button",{type:"button",onClick:v,className:"mt-4 bg-gray-600 text-white p-2 rounded-md w-500 hover:bg-gray-700 transition-colors",children:"Show More"})})]})]})}),e.jsx(A,{})]})}export{I as default};
